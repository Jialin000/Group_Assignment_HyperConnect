(this["webpackJsonphyper-parking-front-end"]=this["webpackJsonphyper-parking-front-end"]||[]).push([[0],{27:function(e,a,t){e.exports=t(40)},39:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(12),s=t.n(l),i=t(9),o=t(7);function c(){return r.a.createElement("nav",null,r.a.createElement(i.b,{exact:!0,to:"/"},"Home"),r.a.createElement(i.b,{to:"/parkingBays"},"Find Parking Bays"),r.a.createElement(i.b,{to:"/users/login"},"LOGIN"),r.a.createElement(i.b,{to:"/users/signup"},"SIGN UP"))}var m=t(14),u=t(15),d=t(6),p=t(17),g=t(16),h=t(26);function E(e){var a=e.className,t=e.children,n=e.onClick,l=Object(h.a)(e,["className","children","onClick"]);return r.a.createElement("div",Object.assign({className:"btn ".concat(a),onClick:n},l),t)}var b=function(e){Object(p.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).validateEmail=function(e){var a=n.state.errormessage;return a.email="",e?!!/^\w+[\w-\.]*\@\w+((-\w+)|(\w*))\.[a-z]{2,3}$/.test(String(e))||(a.email="*Please enter a valid email",n.setState({err:a}),!1):(a.email="*Please enter your email",n.setState({err:a}),!1)},n.validatePassword=function(e){var a=n.state.errormessage;return a.password="",!!e||(a.password="*Please enter your password",n.setState({err:a}),!1)},n.validateForm=function(){var e=n.validateEmail(n.state.email),a=n.validatePassword(n.state.password);return e&&a},n.handleChange=function(e){e.preventDefault();var a=e.target.name,t=e.target.value;"email"===a?n.validateEmail(t):"password"===a&&n.validatePassword(t),n.setState({[a]:t})},n.onSubmit=function(e){e.preventDefault(),n.validateForm()&&(n.setState({loginmessage:"Loading..."}),function(e){var a=e.email,t=e.password;return fetch("/users/login",{method:"POST",headers:{credentials:"include","Content-Type":"application/json"},body:JSON.stringify({email:a,password:t})})}({email:n.state.email,password:n.state.password}).then((function(e){if(200===e.status)n.setState({loginmessage:"Login successful!"});else{if(401!==e.status)throw new Error(e.error);n.setState({loginmessage:"Wrong password or email"})}})).catch((function(e){console.error(e),alert("Error logging in please try again")})))},n.state={username:"",email:"",password:"",loginmessage:"",errormessage:{}},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"SignInForm"},r.a.createElement("h2",null,"Log in to your account"),r.a.createElement("p",null,this.state.loginmessage),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"email",id:"email",name:"email",onChange:this.handleChange}),r.a.createElement("p",null,this.state.errormessage.email),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.handleChange}),r.a.createElement("p",null,this.state.errormessage.password),r.a.createElement(E,{SubclassName:"btn-success",onClick:this.onSubmit},"Submit")),r.a.createElement("div",null,r.a.createElement("h3",null,"New to HyperParking?"),r.a.createElement(E,{className:"btn-success",onClick:function(e){return window.location.href="users/signup"}},"Creat an accout")))}}]),t}(r.a.Component);function f(){return r.a.createElement("div",null,r.a.createElement(E,{className:"btn-success",onClick:function(e){return window.location.href="/parkingBays"}},"Find parking bays"),r.a.createElement(b,null))}function v(){return r.a.createElement("div",{className:"SignInPage"},r.a.createElement(b,null))}var w=function(e){Object(p.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).validateEmail=function(e){var a=n.state.errormessage;return a.email="",e?!!/^\w+[\w-\.]*\@\w+((-\w+)|(\w*))\.[a-z]{2,3}$/.test(String(e))||(a.email="*Please enter a valid email",n.setState({err:a}),!1):(a.email="*Please enter your email",n.setState({err:a}),!1)},n.validateUserName=function(e){var a=n.state.errormessage;return a.username="",!!e||(a.username="*Please enter your username",n.setState({err:a}),!1)},n.validatePassword=function(e){var a=n.state.errormessage;return a.password="",!!e||(a.password="*Please enter your password",n.setState({err:a}),!1)},n.validateForm=function(){var e=n.validateEmail(n.state.email),a=n.validatePassword(n.state.password),t=n.validateUserName(n.state.username);return e&&a&&t},n.handleChange=function(e){e.preventDefault();var a=e.target.name,t=e.target.value;"username"===a?n.validateUserName(t):"email"===a?n.validateEmail(t):"password"===a&&n.validatePassword(t),n.setState({[a]:t})},n.onSubmit=function(e){e.preventDefault(),n.validateForm()&&(n.setState({loginmessage:"Loading..."}),function(e){var a=e.userName,t=e.email,n=e.password;return fetch("/users/signup",{method:"POST",headers:{credentials:"include","Content-Type":"application/json"},body:JSON.stringify({userName:a,email:t,password:n})})}({userName:n.state.username,email:n.state.email,password:n.state.password}).then((function(e){if(201===e.status)n.setState({signupmessage:"Account created!"});else{if(409!==e.status)throw new Error(e.error);n.setState({signupmessage:"This email has been registered."})}})).catch((function(e){console.error(e),alert("Error logging in please try again")})))},n.state={username:"",email:"",signupmessage:"",password:"",errormessage:{}},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"SignUpForm"},r.a.createElement("h2",null,"Sign Up"),r.a.createElement("p",null,this.state.signupmessage),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"username",id:"username",name:"username",onChange:this.handleChange}),r.a.createElement("p",null,this.state.errormessage.username),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",onChange:this.handleChange}),r.a.createElement("p",null,this.state.errormessage.email),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.handleChange}),r.a.createElement("p",null,this.state.errormessage.password),r.a.createElement(E,{SubclassName:"btn-success",onClick:this.onSubmit},"Submit")))}}]),t}(r.a.Component);function y(){return r.a.createElement("div",{className:"SignUpPage"},r.a.createElement(w,null))}var S=t(13);function C(){var e=Object(n.useState)(!0),a=Object(S.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)([]),s=Object(S.a)(l,2),i=s[0],o=s[1],c=Object(n.useState)(null),m=Object(S.a)(c,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){fetch("/parkingBays").then((function(e){return console.log(e),e.json()})).then((function(e){o(e),r(!1)})).catch((function(e){console.log(e),d(e),r(!1)}))}),[]),{loading:t,bays:i,error:u}}function k(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("form",null,r.a.createElement(E,{className:"btn-success",onClick:function(){}},"Search Around")))}function O(e){return r.a.createElement("div",{className:"ParkingBays"},r.a.createElement("h3",null,"Parking bays nearby"))}var j=t(8),P=t(25);t(37);function N(e){var a=Object(P.usePosition)(!0,{enableHighAccuracy:!0}),t=a.latitude,l=a.longitude,s=(a.timestamp,a.accuracy,a.error,{lat:t,lng:l}),i=Object(n.useState)(null),o=Object(S.a)(i,2),c=o[0],m=o[1];return r.a.createElement(j.c,{googleMapsApiKey:"AIzaSyCE_by6BiXR1XCws5YiduStyJfvzPrXfuc"},r.a.createElement(j.a,{mapContainerStyle:{width:"1000px",height:"800px"},center:s,zoom:16},r.a.createElement(j.d,{position:s,label:"Your current location",icon:{url:"/userLocationIcon.png"}}),e.bays.map((function(e){return"Unoccupied"===e.status&&r.a.createElement(j.d,{position:{lat:parseFloat(e.lat),lng:parseFloat(e.lon)},onClick:function(){m(e)},icon:{url:"/availableIcon.png"}})})),e.bays.map((function(e){return"Present"===e.status&&r.a.createElement(j.d,{position:{lat:parseFloat(e.lat),lng:parseFloat(e.lon)},icon:{url:"/nonAvailableIcon.png"}})})),c&&r.a.createElement(j.b,{position:{lat:parseFloat(c.lat),lng:parseFloat(c.lon)},onCloseClick:function(){m(null)}},r.a.createElement("div",null,r.a.createElement("h2",null,"Bay #",c.bay_id),r.a.createElement("p",null,"st_marker_id: ",c.st_marker_id),r.a.createElement("p",null,"latitude: ",c.lat),r.a.createElement("p",null,"latitude: ",c.lon)))))}function F(){var e=C(),a=e.loading,t=e.bays,n=e.error;if(a)return r.a.createElement("p",null,"Loading...");if(n)return r.a.createElement("p",null,"Something went wrong: ",n.message);return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"left",margin:"20px 10px 20px 10px",width:"25%",border:"solid 1px black",height:"100%"}},r.a.createElement(k,null),r.a.createElement(O,{bays:t})),r.a.createElement("div",{style:{float:"left",margin:"20px 10px 20px 10px",width:"70%",border:"solid 1px black"}},r.a.createElement(N,{bays:t})))}t(39);function x(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(c,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/"},r.a.createElement(f,null)),r.a.createElement(o.a,{path:"/users/login"},r.a.createElement(v,null)),r.a.createElement(o.a,{path:"/users/signup"},r.a.createElement(y,null)),r.a.createElement(o.a,{path:"/parkingBays"},r.a.createElement(F,null)))))}var B=document.getElementById("root");s.a.render(r.a.createElement(x,null),B)}},[[27,1,2]]]);
//# sourceMappingURL=main.307dea33.chunk.js.map